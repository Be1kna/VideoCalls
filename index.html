<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Call - Connect Anywhere</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Pre-call Screen -->
        <div id="preCallScreen" class="screen active">
            <div class="pre-call-content">
                <h1>Video Call</h1>
                <p class="subtitle">Connect with anyone, anywhere in the world</p>
                
                <div class="join-section">
                    <div class="input-group">
                        <label for="roomId">Room ID</label>
                        <input type="text" id="roomId" placeholder="Enter or create room ID" autocomplete="off">
                        <button id="createRoomBtn" class="btn btn-primary">Create Room</button>
                    </div>
                    
                    <div class="input-group">
                        <label for="yourName">Your Name</label>
                        <input type="text" id="yourName" placeholder="Enter your name" autocomplete="off">
                    </div>
                    
                    <button id="joinBtn" class="btn btn-success btn-large">Join Call</button>
                </div>
                
                <div class="info-box">
                    <h3>Features</h3>
                    <ul>
                        <li>‚úì HD Video & Audio</li>
                        <li>‚úì Screen Sharing</li>
                        <li>‚úì Works Worldwide</li>
                        <li>‚úì Secure & Private</li>
                    </ul>
                </div>
                
                <div class="info-box troubleshooting" id="troubleshootingBox" style="display: none;">
                    <h3>‚ö†Ô∏è Troubleshooting</h3>
                    <p id="troubleshootingMessage"></p>
                    <button id="testPermissionsBtn" class="btn btn-primary" style="margin-top: 10px; width: 100%;">Test Camera & Microphone</button>
                </div>
            </div>
        </div>

        <!-- Call Screen -->
        <div id="callScreen" class="screen">
            <div class="call-header">
                <div class="room-info">
                    <span class="room-id-display">Room: <strong id="displayRoomId">-</strong></span>
                    <span class="connection-status" id="connectionStatus">Connecting...</span>
                </div>
                <button id="leaveBtn" class="btn btn-danger">Leave Call</button>
            </div>

            <div class="video-container">
                <div class="video-wrapper">
                    <video id="localVideo" autoplay playsinline muted></video>
                    <video id="localCameraPip" autoplay playsinline muted class="pip-camera"></video>
                    <div class="video-label">You</div>
                    <div class="video-controls-overlay">
                        <button id="toggleVideo" class="control-btn" title="Toggle Video">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 7l-7 5 7 5V7z"></path>
                                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                            </svg>
                        </button>
                        <button id="toggleAudio" class="control-btn" title="Toggle Audio">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                            </svg>
                        </button>
                        <button id="switchCameraBtn" class="control-btn" title="Switch Camera">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 7l-6 6"></path>
                                <path d="M3 17l6-6"></path>
                                <path d="M21 3v4h-4"></path>
                                <path d="M3 21v-4h4"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="video-wrapper">
                    <video id="remoteVideo" autoplay playsinline></video>
                    <div class="video-label" id="remoteLabel">Waiting for participant...</div>
                    <div class="video-controls-overlay">
                        <button id="toggleScreenShare" class="control-btn" title="Share Screen">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                <line x1="8" y1="21" x2="16" y2="21"></line>
                                <line x1="12" y1="17" x2="12" y2="21"></line>
                            </svg>
                        </button>
                        <button id="remoteFullScreenBtn" class="control-btn" title="Full Screen">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M8 3H5a2 2 0 0 0-2 2v3"></path>
                                <path d="M16 3h3a2 2 0 0 1 2 2v3"></path>
                                <path d="M8 21H5a2 2 0 0 1-2-2v-3"></path>
                                <path d="M16 21h3a2 2 0 0 0 2-2v-3"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="call-controls">
                <button id="muteBtn" class="control-btn-large" title="Mute/Unmute">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
                        <line x1="23" y1="9" x2="17" y2="15"></line>
                        <line x1="17" y1="9" x2="23" y2="15"></line>
                    </svg>
                </button>
                
                <button id="videoBtn" class="control-btn-large" title="Turn Video On/Off">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 7l-7 5 7 5V7z"></path>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
                
                <button id="screenShareBtn" class="control-btn-large" title="Share Screen">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                </button>
                
                <button id="endCallBtn" class="control-btn-large btn-danger" title="End Call">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification"></div>
        
        <!-- Debug Box -->
        <div id="debugBox" class="debug-box">
            <div class="debug-header">
                <h3>üêõ Debug Log</h3>
                <button id="toggleDebugBtn" class="debug-toggle">Hide</button>
                <button id="clearDebugBtn" class="debug-clear">Clear</button>
            </div>
            <div id="debugContent" class="debug-content"></div>
        </div>
    </div>

    <script src="client.js"></script>
</body>
</html>

